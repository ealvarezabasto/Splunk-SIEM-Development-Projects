# Configure a Deployment Server

## Step 1: Create deployment app directories for every app that we want to deploy.

* Login to Management Server (Deployment Server) through the Command Line

* Create deployment app directories for every app that we want to deploy. The default place for deplyment app directory is in Opt > Splunk > Etsy > Deployment app

   Command Line -
  
  ***/opt/splunk/etc

  <img width="867" height="155" alt="image" src="https://github.com/user-attachments/assets/87257fab-6d66-4b76-bafc-dc68b97d54ed" />

* Let's create a directory for an app. Directory name is 'Test'. In this context, an app is anythng that we want to send to the deployment clients. Does not have to be an actual Splunk app.

   Command Line -

  ***sudo mkdir test***

  <img width="1711" height="219" alt="image" src="https://github.com/user-attachments/assets/f3f9a32b-8635-4bef-a423-a38e866d5984" />

* Reload the deploy server by going to the deploy server.

  Command Line

  **/opt/splunk/bin/sudo ./splunk reload deploy server***

  <img width="1904" height="96" alt="image" src="https://github.com/user-attachments/assets/761ab586-b27a-4bde-829d-a1fefa75cf27" />

# Configure deployment appps

* Login to Management Server (Deployment Server) via the UI. Go to ***Settings*** > ***Forwarder Management***

   <img width="1353" height="627" alt="image" src="https://github.com/user-attachments/assets/e30e2cd8-67c0-4cb9-a0e1-7830abee7cf2" />

* You'll find **Test** app that was created

  <img width="1864" height="909" alt="image" src="https://github.com/user-attachments/assets/e18a5fa1-d12b-422e-9019-ceaa6e0718b6" />

* Currently there are no group/server classes. On each deployemtn client, we have to tell it where its deployment server is.

* Let's create a server class by going to ***Groups / Server Classes*** > ***New Server Class***

  <img width="1876" height="609" alt="image" src="https://github.com/user-attachments/assets/c1c0233f-06c7-47c3-9c1f-b39cac620cce" />

* Name server class ***Linux_Intermediate _Heavy_Forwarder***. 

  <img width="884" height="360" alt="image" src="https://github.com/user-attachments/assets/c2a3a50b-c210-42a2-a82e-eff91f9d1820" />

* Linux Intermediate Heavy Forwarder server class has been created. Add test app to it. Select ***Configurations*** > ***Edit configurations***

  <img width="1885" height="558" alt="image" src="https://github.com/user-attachments/assets/46beb2a1-3ba2-4447-b395-384db6f2c866" />

* Add ***test*** app

  <img width="1913" height="528" alt="image" src="https://github.com/user-attachments/assets/9d4d407d-4b7f-459c-a89a-583a89335612" />

# Configure deployment clients

* Login to Intermediate Heavy Forwarder through the Command Line

* To setup a deployment client, log in to ***intermediate heavy forwarder*** server

  <img width="1819" height="876" alt="image" src="https://github.com/user-attachments/assets/e31e8717-91c7-4c35-86e9-cf669244d7cb" />

* Command Line -

  ***./splunk set deploy-poll <deployment server private ip address>***

  <img width="1819" height="876" alt="image" src="https://github.com/user-attachments/assets/1a2cd9d4-55a2-4b63-add3-750ac705856b" />

* Restart ***intermediate heavy forwarder** 

  Command Line -

  sudo ./splunk restart***

  <img width="1822" height="326" alt="image" src="https://github.com/user-attachments/assets/f2e7551c-af63-4392-a9a5-3edee2ddcf2b" />

* Upon restart, the deployment client (intermediate heavy forwarder) will intiatie a handshake with the deployment server.

* Return to Deployment Server (Management Server) via the UI. Go to ***Forwarder Management Console***

* You should see the 1 intermediate heavy forwarder now connected to the Deployment Server

# Configure client groups/server classes

Description: Add Forwarder to the Server Class that we made called ***intermediate heavy forwarder***

* Login to the Deployment Server (Management Server) via the UI.

* Go to ***Groups / Server Classes* > Select server class name ***Linux_Intermediate_Heavy_Forwarder*** > ***Agents*** > ***Edit agent assignment***

  <img width="1893" height="558" alt="image" src="https://github.com/user-attachments/assets/791ddc2b-108c-4fd7-9153-6e5769a8a1e1" />

* Add only deployment client that is the intermediate heavy forwarder IP Address

  <img width="947" height="313" alt="image" src="https://github.com/user-attachments/assets/9d5262e3-28bc-4525-a493-49537ee5443f" />

# Monitor forwarder management activities
* Login to Interemediate Heavy Forwarder server through the command line

* Command Line -
   ***cd /opt/splunk/etc/apps***

* You should find the **Test** app

